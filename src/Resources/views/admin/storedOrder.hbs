<div class="container">

  <table class="table">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Tên Người Dùng</th>
        <th scope="col">Mã Hóa Đơn</th>
        <th scope="col">Ngày hết hạn</th>
        <th scope='col'></th>
        <th scope='col'>
          <div>
            <a href='/admin/trash/order' class='position-relative text-danger container__trashBtn'>
              <i class='fa-solid fa-trash'></i>
              <div class='container__deletedCount'>
                <p class='deletedCount m-0'>{{deletedCount}}</p>
              </div>
            </a>
          </div>
        </th>

      </tr>
    </thead>
    <tbody>
      {{#each orders}}
      <tr>
        <th scope='row'>{{sum @index 1}}</th>
        <td>{{this.user.name}}</td>
        <td>{{this._id}}</td>
        <td>{{this.timerent}}</td>
        <td><a type='button' class='btn btn-danger' data-id='{{this._id}}' data-bs-toggle='modal'
            data-bs-target='#exampleModal'><i class='fa-solid fa-trash'></i></a></td>
      </tr>

      {{else}}
      <tr>
        <th class='text-center border-0' colspan='5'>
          Bạn chưa có đơn hàng nào
        </th>
      </tr>
      {{/each}}

    </tbody>
  </table>
</div>
<form method='POST' name='delete-form'></form>

<div class='modal' id='exampleModal' tabindex='-1' aria-labelledby='exampleModalLabel' aria-hidden='true'>
  <div class='modal-dialog'>
    <div class='modal-content'>
      <div class='modal-header'>
        <h5 class='modal-title text-bold' id='exampleModalLabel'>Xóa Đơn Hàng ?</h5>
        <button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button>
      </div>
      <div class='modal-body'>
        Bạn có muốn xóa Đơn Hàng ?
      </div>
      <div class='modal-footer'>
        <button type='button' class='btn btn-primary delete-btn'>Xóa</button>
        <button type='button' class='btn btn-danger' data-bs-dismiss='modal'>Close</button>
      </div>
    </div>
  </div>
</div>
<script>
  var id;
  const deleteForm = document.forms['delete-form'];
  $(document).ready(function () {
    $('#exampleModal').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget);
      id = button.data('id');
      console.log(id);
    });
  });
  const btnDeleteCourse = document.querySelector('.delete-btn');
  btnDeleteCourse.onclick = function () {
    deleteForm.action = '/admin/' + id + '?_method=DELETE';
    deleteForm.submit();
  };
</script>