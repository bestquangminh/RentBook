<div class="container">
    <div class="d-flex mt-5 p-4 details">
        <div style="margin-right: 8px;" class="listOfImage">
            <img class="mb-4 border listOfImage__item" src="/{{book.images.[0]}}" alt="">
            <img class="border listOfImage__item" src="/{{book.images.[1]}}" alt="">
            <img class="border listOfImage__item" src="/{{book.images.[2]}}" alt="">
            <img class="border listOfImage__item" src="/{{book.images.[3]}}" alt="">

        </div>
        <div class="details__bigImg">
            <img class="details__bigImg-item" src="/{{book.images.[0]}}" alt="">
        </div>
        <div class="details__info w-100">
            <h1 class="details__info-title text-center">{{book.name}}</h1>
            <div class="details__info-book text-end">
                <span>Tác giả:</span>
                <span class="fw-bold">{{book.author.name}}</span>
            </div>
            <div class="d-flex align-items-center">
                Gía thuê:
                <h3 class="p-2 fw-bold text-danger details__info-price">
                    {{book.price}}
                </h3>
                <p class="m-0">/Ngày</p>
            </div>
            <div class="d-flex align-items-center details__btn-controller">
                <a class='details__btn-controller-item text-decoration-none registernBtn btn btn-link text-danger border border-danger'
                    href='http://localhost:3000/registerform'><i class="fa-solid fa-cart-shopping"></i>Thêm vào giỏ hàng</a>
                <a class='details__btn-controller-item loginBtn btn btn-danger fw-bold' href='http://localhost:3000/loginform'>Thuê ngay</a>
            </div>
        </div>
    </div>
    <div style="margin-top: 12px;" class="p-3 description details">
        <h3 class="description__header">Thông tin sản phẩm</h3>
        <table class="w-100">
            <tbody class="description__info-table">
                <tr class="description__info-item">
                    <th>Mã hàng:</th>
                    <td>{{book._id}}</td>
                </tr>
                <tr class="description__info-item">
                    <th>Tác giả:</th>
                    <td>{{book.author.name}}</td>
                </tr>
            </tbody>
        </table>
        <hr>
        <span>{{book.description}}</span>
    </div>
    <div style="margin-top: 12px;" class="p-3 authorBook details">
        <h3>Sản phẩm liên quan</h3>
        <div class="row">
            {{#each authorBook}}
            <div class="col col-lg-3">
                <a href="/details/{{this.slug}}" class="border d-block authorBook__btn">
                    <div class="w-100 h-100 authorBook__containImg">
                        <img style="height: 400px;" class="w-100 mw-100 img-fluid "
                            src="http://localhost:3000/{{this.images.[0]}}" alt="" class="authorBook__img">
                    </div>
                </a>
                <div class="authorBook__info">
                    <a href="/details/{{this.slug}}"
                        class="link-dark text-decoration-none authorBook__detailsBtn">{{this.name}}</a>
                    <p class="text-danger fw-bold">{{this.price}}đ</p>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</div>
<div id="myModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="img01">
    <div id="caption"></div>
</div>
<script>
    const modal = document.getElementById("myModal");
    // Get the images and insert them inside the modal - use their "alt" text as a caption
    const imgList = document.querySelectorAll(".listOfImage__item");
    const modalImg = document.getElementById("img01");
    const bookPrice = "{{book.price}}";
    const price = document.querySelector('.details__info-price');
    const formattedPrice = new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(bookPrice);
    price.textContent = formattedPrice;

    // Loop through each image and add a click event listener
    imgList.forEach(function (img) {
        img.onclick = function () {
            modal.style.display = "block";
            modalImg.src = this.src;
        }
    });

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";
    };

</script>